{"version":3,"sources":["../node_modules/@linways/table-to-excel/dist sync","Components/Row.jsx","Components/Search.jsx","App.js","index.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","Row","props","idx","href","data","name","description","followers","total","tracks","items","length","owner","display_name","public","spotifyApi","Spotify","Search","auth","useState","amount","setAmount","input","setInput","results","setResults","searching","setSearching","finished","setFinished","access_token","setAccessToken","useEffect","term","a","noMatch","timeout","searchResults","i","searchPlaylists","limit","then","body","playlists","forEach","item","setTimeout","getPlaylist","res","push","search","htmlFor","type","onClick","preventDefault","field","document","getElementById","value","setAttribute","TableToExcel","convert","Date","now","alert","map","head","index","createContext","App","hashParams","r","q","window","location","hash","substring","exec","decodeURIComponent","getHashParams","className","ReactDOM","render","StrictMode"],"mappings":"6JAAA,SAASA,EAAoBC,GAC5B,IAAIC,EAAI,IAAIC,MAAM,uBAAyBF,EAAM,KAEjD,MADAC,EAAEE,KAAO,mBACHF,EAEPF,EAAoBK,KAAO,WAAa,MAAO,IAC/CL,EAAoBM,QAAUN,EAC9BO,EAAOC,QAAUR,EACjBA,EAAoBS,GAAK,I,wKCqBVC,G,KA1BH,SAACC,GACX,OACE,4BACE,4BAAKA,EAAMC,IAAM,GACjB,4BAEI,uBAAGC,KAAI,4CAAuCF,EAAMG,KAAKL,KACtDE,EAAMG,KAAKC,OAEX,QAEP,4BAAKJ,EAAMG,KAAKE,aAAe,QAC/B,4BAAKL,EAAMG,KAAKG,UAAUC,OAAS,QACnC,4BAAKP,EAAMG,KAAKK,OAAOC,MAAMC,QAAU,QACvC,4BAEI,uBAAGR,KAAI,wCAAmCF,EAAMG,KAAKQ,MAAMb,KACxDE,EAAMG,KAAKQ,MAAMC,eAEjB,QAEP,4BAAKZ,EAAMG,KAAKU,OAAS,OAAS,YCjBlCC,G,MAAa,IAAIC,KAwHRC,EAtHA,SAAC,GAAc,IAAZC,EAAW,EAAXA,KAAW,EACDC,mBAAS,GADR,mBACtBC,EADsB,KACdC,EADc,OAEDF,qBAFC,mBAEpBG,EAFoB,KAEbC,EAFa,OAGGJ,mBAAS,IAHZ,mBAGpBK,EAHoB,KAGXC,EAHW,OAION,qBAJP,mBAIpBO,EAJoB,KAITC,EAJS,OAKKR,oBAAS,GALd,mBAKpBS,EALoB,KAKVC,EALU,KAOvBX,EAAKY,cACPf,EAAWgB,eAAeb,EAAKY,cAGjCE,qBAAU,WACJV,IACFD,EAAU,GACVQ,GAAY,GACZF,GAAa,GACD,uCAAG,WAAOM,GAAP,qBAAAC,EAAA,sDACTC,EAAU,EACVC,EAAU,IACVC,EAAgB,GAEXC,EAAI,EALA,YAKGA,EAAI,GAAKH,EAAU,IALtB,iCAMLpB,EAAWwB,gBAAgBN,EAAM,CAAEO,MAAO,KAAMC,MAAK,SAACrC,GAC1DA,EAAKsC,KAAKC,UAAUjC,MAAMkC,QAA1B,uCAAkC,WAAOC,GAAP,SAAAX,EAAA,sDAChCY,WAAU,sBAAC,4BAAAZ,EAAA,sEACSnB,EAAWgC,YAAYF,EAAK9C,IADrC,UACHiD,EADG,QAELX,EAAcW,EAAIN,MAFb,iDAKPL,EAAcY,KAAKD,EAAIN,MACvBrB,EAAUD,KANH,OASLA,EAAS,KAAIgB,EAAU,KACvBhB,EAAS,MAAKgB,EAAU,KAVnB,4CAWRA,GAZ6B,2CAAlC,0DAPS,OAK0BE,IAL1B,uBAwBbQ,YAAW,WACTrB,GAAW,SAACD,GAAD,OAAaa,KACxBV,GAAa,GACbE,GAAY,KACX,KA5BU,4CAAH,qDA8BZqB,CAAO5B,MAER,CAACA,EAAOG,IAYX,OACE,6BACE,8BACE,2BAAO0B,QAAQ,SAAf,UAEE,2BAAOpD,GAAG,QAAQqD,KAAK,UAEzB,6BACE,4BACEC,QAAS,SAAC7D,GACRA,EAAE8D,iBACF,IAAMC,EAAQC,SAASC,eAAe,SAClCF,EAAMG,MACRnC,EAASgC,EAAMG,OAEfH,EAAMI,aAAa,cAAe,gCAPxC,UAaA,4BACEN,QAAS,SAAC7D,GACJgC,EAAQb,OAAS,GACnBnB,EAAE8D,iBACFM,IAAaC,QAAQL,SAASC,eAAe,SAAU,CACrDpD,KAAK,SAAD,OAAWiB,EAAX,YAAoBwC,KAAKC,MAAzB,YAGNC,MAAM,0BARZ,qBAgBHtC,GAAa,iDAAuBN,EAAvB,aACbQ,GAAY,oCAAUR,EAAV,aACb,2BAAOrB,GAAG,SACR,+BAlDW,CACf,KACA,OACA,cACA,YACA,SACA,aACA,UA4CgBkE,KAAI,SAACC,GAAD,OACZ,4BAAKA,OAGT,+BACsB,IAAnB1C,EAAQb,OACP,6BAEAa,EAAQyC,KAAI,SAAC7D,EAAM+D,GACjB,OAAO,kBAAC,EAAD,CAAK/D,KAAMA,EAAMF,IAAKiE,WCnHhBC,0BA2BZC,MAzBf,WACE,IADa,EAYElD,mBAXO,WAKpB,IAJA,IACI3B,EADA8E,EAAa,GAEfC,EAAI,uBACJC,EAAIC,OAAOC,SAASC,KAAKC,UAAU,GAC7BpF,EAAI+E,EAAEM,KAAKL,IACjBF,EAAW9E,EAAE,IAAMsF,mBAAmBtF,EAAE,IAE1C,OAAO8E,EAGeS,IAAjB7D,EAZM,oBAcb,OAAKA,EAAKY,aAIN,yBAAKkD,UAAU,OACb,kBAAC,EAAD,CAAQ9D,KAAMA,KAJVuD,OAAOC,SAASvE,KAAO,yBChBnC8E,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEF3B,SAASC,eAAe,U","file":"static/js/main.7d6feab2.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 33;","import React from \"react\";\r\nimport \"../App.css\";\r\n\r\nconst Row = (props) => {\r\n  return (\r\n    <tr>\r\n      <td>{props.idx + 1}</td>\r\n      <td>\r\n        {(\r\n          <a href={`https://open.spotify.com/playlist/${props.data.id}`}>\r\n            {props.data.name}\r\n          </a>\r\n        ) || \"null\"}\r\n      </td>\r\n      <td>{props.data.description || \"null\"}</td>\r\n      <td>{props.data.followers.total || \"null\"}</td>\r\n      <td>{props.data.tracks.items.length || \"null\"}</td>\r\n      <td>\r\n        {(\r\n          <a href={`https://open.spotify.com/user/${props.data.owner.id}`}>\r\n            {props.data.owner.display_name}\r\n          </a>\r\n        ) || \"null\"}\r\n      </td>\r\n      <td>{props.data.public ? \"true\" : \"false\"}</td>\r\n    </tr>\r\n  );\r\n};\r\n\r\nexport default Row;\r\n","import React, { useState } from \"react\";\r\nimport Spotify from \"spotify-web-api-node\";\r\nimport TableToExcel from \"@linways/table-to-excel\";\r\nimport Row from \"./Row\";\r\nimport \"../Styles/Style.css\";\r\nimport { useEffect } from \"react\";\r\n\r\nconst spotifyApi = new Spotify();\r\n\r\nconst Search = ({ auth }) => {\r\n  let [amount, setAmount] = useState(0);\r\n  const [input, setInput] = useState();\r\n  const [results, setResults] = useState([]);\r\n  const [searching, setSearching] = useState();\r\n  const [finished, setFinished] = useState(true);\r\n\r\n  if (auth.access_token) {\r\n    spotifyApi.setAccessToken(auth.access_token);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (input) {\r\n      setAmount(0);\r\n      setFinished(false);\r\n      setSearching(true);\r\n      const search = async (term) => {\r\n        let noMatch = 0;\r\n        let timeout = 200;\r\n        let searchResults = [];\r\n\r\n        for (let i = 0; i < 4 || noMatch > 10; i++) {\r\n          await spotifyApi.searchPlaylists(term, { limit: 50 }).then((data) => {\r\n            data.body.playlists.items.forEach(async (item) => {\r\n              setTimeout(async () => {\r\n                const res = await spotifyApi.getPlaylist(item.id);\r\n                if (searchResults[res.body]) {\r\n                  return;\r\n                } else {\r\n                  searchResults.push(res.body);\r\n                  setAmount(amount++);\r\n                }\r\n\r\n                if (amount > 90) timeout = 1000;\r\n                if (amount > 100) timeout = 2000;\r\n              }, timeout);\r\n            });\r\n          });\r\n        }\r\n\r\n        setTimeout(() => {\r\n          setResults((results) => searchResults);\r\n          setSearching(false);\r\n          setFinished(true);\r\n        }, 3000);\r\n      };\r\n      search(input);\r\n    }\r\n  }, [input, setResults]);\r\n\r\n  const headings = [\r\n    \"id\",\r\n    \"Name\",\r\n    \"Description\",\r\n    \"Followers\",\r\n    \"Tracks\",\r\n    \"Owner Name\",\r\n    \"Public\",\r\n  ];\r\n\r\n  return (\r\n    <div>\r\n      <form>\r\n        <label htmlFor=\"input\">\r\n          Search:\r\n          <input id=\"input\" type=\"text\" />\r\n        </label>\r\n        <div>\r\n          <button\r\n            onClick={(e) => {\r\n              e.preventDefault();\r\n              const field = document.getElementById(\"input\");\r\n              if (field.value) {\r\n                setInput(field.value);\r\n              } else {\r\n                field.setAttribute(\"placeholder\", \"Please enter a search term\");\r\n              }\r\n            }}\r\n          >\r\n            Search\r\n          </button>\r\n          <button\r\n            onClick={(e) => {\r\n              if (results.length > 0) {\r\n                e.preventDefault();\r\n                TableToExcel.convert(document.getElementById(\"table\"), {\r\n                  name: `query-${input}-${Date.now()}.xlsx`,\r\n                });\r\n              } else {\r\n                alert(\"No results to export\");\r\n              }\r\n            }}\r\n          >\r\n            Export to excel\r\n          </button>\r\n        </div>\r\n      </form>\r\n      {searching && <p>Searching... Found {amount} results.</p>}\r\n      {finished && <p>Found {amount} results.</p>}\r\n      <table id=\"table\">\r\n        <thead>\r\n          {headings.map((head) => (\r\n            <th>{head}</th>\r\n          ))}\r\n        </thead>\r\n        <tbody>\r\n          {results.length === 0 ? (\r\n            <tr></tr>\r\n          ) : (\r\n            results.map((data, index) => {\r\n              return <Row data={data} idx={index} />;\r\n            })\r\n          )}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n};\r\nexport default Search;\r\n","import React, { useState, createContext } from \"react\";\r\nimport Search from \"./Components/Search\";\r\nimport \"./App.css\";\r\n\r\nexport const AuthContext = createContext();\r\n\r\nfunction App() {\r\n  const getHashParams = () => {\r\n    var hashParams = {};\r\n    var e,\r\n      r = /([^&;=]+)=?([^&;]*)/g,\r\n      q = window.location.hash.substring(1);\r\n    while ((e = r.exec(q))) {\r\n      hashParams[e[1]] = decodeURIComponent(e[2]);\r\n    }\r\n    return hashParams;\r\n  };\r\n\r\n  const [auth] = useState(getHashParams());\r\n\r\n  if (!auth.access_token) {\r\n    return (window.location.href = \"http://localhost:8888\");\r\n  } else {\r\n    return (\r\n      <div className=\"App\">\r\n        <Search auth={auth} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}